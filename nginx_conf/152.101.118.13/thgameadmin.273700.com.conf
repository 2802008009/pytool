server {
  listen 80;
  server_name thgameadmin.273700.com;
  access_log /data/wwwlogs/thgameadmin.access.log combined;
  error_log /data/wwwlogs/thgameadmin.error.log error;
  index index.html index.htm index.php;
  root /data/wwwroot/th57game/admin;
  
  
  rewrite ^/checkcode/(.*)$ /this.php last;
  rewrite ^/r/(.*)$ /line.php last;


#RewriteRule ^lebomaster/account/(.*)$ 403
#RewriteRule ^lebomaster/do/(.*)$ 403
#RewriteRule ^lebomaster/lot/(.*)$ 403
#RewriteRule ^lebomaster/lottery/(.*)$ 403
#RewriteRule ^lebomaster/project/(.*)$ 403
#RewriteRule ^lebomaster/report/(.*)$ 403
#RewriteRule ^lebomaster/system/(.*)$ 403
#RewriteRule ^lebomaster/task/(.*)$ 403
#RewriteRule ^lebomaster/tools/(.*)$ 403
#RewriteRule ^lebomaster/user/(.*)$ 403
#RewriteRule ^pub/(.*)$ 403
#RewriteRule ^source/(.*)$ 403

#RewriteRule ^checkcode/(.*)$ this.php

#RewriteRule ^back_pass.php$ 403
#RewriteRule ^change_pass.php$ 403
#RewriteRule ^dels.php$ 403
#RewriteRule ^r/(.*)$ line.php

  
  location ~ [^/]\.php(/|$) {
    #fastcgi_pass remote_php_ip:9000;
    fastcgi_pass unix:/dev/shm/php-cgi.sock;
    fastcgi_index index.php;
    include fastcgi.conf;
  }
  location ~ .*\.(gif|jpg|jpeg|png|bmp|swf|flv|mp4|ico)$ {
    expires 30d;
    access_log off;
  }
  location ~ .*\.(js|css)?$ {
    expires 7d;
    access_log off;
  }
  location ~ /\.ht {
    deny all;
  }

  location ~ /lebomaster/(account|do|lot|lottery|project|report|system|task|tools|user)/ {
    deny all;
  }

  location ~ /(pub|source)/ {
    deny all;
  }

  location ~ /(back_pass.php|change_pass.php|dels.php) {
    deny all;
  }
}

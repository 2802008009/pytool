server {
  listen 80;
  server_name www.* ww2.* data.* ds3721.com dsldl.com dsdq18.com dsyl88.com ds876.com
  769844.com 767554.com 763644.com 769644.com;
  access_log /data/wwwlogs/www.access.log main;
  error_log /data/wwwlogs/www.error.log error;

  index index.html index.php;
  root /data/wwwroot/th57game/www;
  
  rewrite ^/checkcode/(.*)$ /this.php last;
  rewrite ^/r/(.*)$ /line.php last;
  rewrite ^/a/(.*)$ /a.php last;
  rewrite ^/join/(.*)$ /join.php?a=$1 last;
  rewrite ^/default.shtml$ /default.php last;
  
  location ~ [^/]\.php(/|$) {
    #fastcgi_pass remote_php_ip:9000;
    fastcgi_pass unix:/dev/shm/php-cgi.sock;
    fastcgi_index index.php;
    include fastcgi.conf;
  }
  location ~ .*\.(gif|jpg|jpeg|png|bmp|swf|flv|mp4|ico)$ {
    expires 30d;
    access_log off;
  }
  location ~ .*\.(js|css)?$ {
    expires 7d;
    access_log off;
  }
  location ~ /\.ht {
    deny all;
  }

  location ~ /lebomaster/(account|do|lot|lottery|project|report|system|task|tools|user)/ {
    deny all;
  }

  location ~ /(pub|source)/ {
    deny all;
  }

  location ~ /(back_pass.php|change_pass.php|dels.php) {
    deny all;
  }

}

server {
  listen 80;
  server_name m.* wap.*;
  access_log /data/wwwlogs/m.access.log main;
  error_log /data/wwwlogs/m.error.log error;

  index index.html index.php;
  root /data/wwwroot/th57game/www/m;
  
  rewrite ^/api/(.*)/(.*)$ /api.php?a=$1&b=$2 last;
  rewrite ^/lottery/(.*)$ /lottery.php?a=$1 last;
  rewrite ^/default.shtml$ /default.php last;

  location ~ [^/]\.php(/|$) {
    #fastcgi_pass remote_php_ip:9000;
    fastcgi_pass unix:/dev/shm/php-cgi.sock;
    fastcgi_index index.php;
    include fastcgi.conf;
  }
  location ~ .*\.(gif|jpg|jpeg|png|bmp|swf|flv|mp4|ico)$ {
    expires 30d;
    access_log off;
  }
  location ~ .*\.(js|css)?$ {
    expires 7d;
    access_log off;
  }
  location /api/deposit_withdraw/GetThirdPartyBanks?r=388 {
  	deny all;
  	return 403;
  }

 
  location ~ /\.ht {
    deny all;
  }

}


server {
  listen 80;
  server_name pay.*;
  access_log /data/wwwlogs/pay.access.log main;
  error_log /data/wwwlogs/pay.error.log error;

  index index.php index.html ;
  root /data/wwwroot/th57game/www/funpay;
 
  location ~ [^/]\.php(/|$) {
    #fastcgi_pass remote_php_ip:9000;
    fastcgi_pass unix:/dev/shm/php-cgi.sock;
    fastcgi_index index.php;
    include fastcgi.conf;
  }
  location ~ .*\.(gif|jpg|jpeg|png|bmp|swf|flv|mp4|ico)$ {
    expires 30d;
    access_log off;
  }
  location ~ .*\.(js|css)?$ {
    expires 7d;
    access_log off;
  }
  location ~ /\.ht {
    deny all;
  }

}
